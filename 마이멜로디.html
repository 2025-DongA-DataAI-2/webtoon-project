<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id = "btn">영화 순위 요청!</button>
    <!-- 영화 데이터를 뿌려줄 container -->
    <div id = "container"></div>
    <script>
        // 1. id가 btn인 버튼을 눌렀을 때, getData라는 함수를 실행
        // 2. getData라는 함수를 생성
        // 3. 테스트용으로 console 잘 호출되는 지 확인할 것
        // 4. [getData] 함수
        // 4-1. fetch를 통해 url 데이터를 가지고 오기
        // 4-2. 데이터를 분석해서 console 창에 1위~10위까지 영화에 대한 정보 출력
        //      ex) 1 만약에우리 2025-12-31
        //      ex) 2 아바타 : 불과 재 2025-12-17
        // 4-3. id가 container인 div안에 해당 내용을 p태그로만 출력 (DOM)
        // 5. 표 구성 

        let url = 'http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchWeeklyBoxOfficeList.json?key=3ff7cbdf664a12ae9556efd6c8eb23e9&targetDt=20260105'
        
        
        let btn = document.getElementById('btn')
        let container = document.getElementById('container')

        const getData = () => {
            console.log('getData Function!')
            fetch (url)
            .then(res => res.json())
            .then(res=>{
                console.log('res', res.boxOfficeResult.weeklyBoxOfficeList)
                // rank(순위), openDt(개봉일자), movieNm(이름)

                let code = ''
                let list = res.boxOfficeResult.weeklyBoxOfficeList

                for (let i = 0; i<list.length ; i++){
                    code += `<p>${list[i].rank} - ${list[i].movieNm} - ${list[i].opedDt}</p>`
                }

                container.innerHTML = code
            })
        }
        btn.addEventListener('click',getData)
        
    
    
    </script>
</body>
</html>
</body>
</html>